import time, random as rnd, view as v

contacts = {}
rnd.seed(time.perf_counter())

def get_cmd() -> str:
    line_info = "–í–≤–µ–¥—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É: "
    v.prn(v.view("‚ñ∂ ", '*5h') + v.view(line_info, '*h'), end=' ')
    s = input()
    print(v.go_up + v.r_cln + v.view("‚úì ", "*2") + line_info + v.view(s, '-'))
    return s.strip()

def quit():
    print("–î–æ –ø–æ–±–∞—á–µ–Ω–Ω—è üëã")
    exit(0)

def hello():
    v.lines_clean()
    options = (
        '–ü—Ä–∏–≤—ñ—Ç! –ß–∏–º –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏?',
        '–í—ñ—Ç–∞—é! –Ø —Ç—É—Ç, —â–æ–± –¥–æ–ø–æ–º–æ–≥—Ç–∏.',
        '–î–æ–±—Ä–∏–π –¥–µ–Ω—å! –Ø –¥–æ –≤–∞—à–∏—Ö –ø–æ—Å–ª—É–≥.',
        '–ü—Ä–∏–≤—ñ—Ç, —è–∫ —Å–ø—Ä–∞–≤–∏?',
        '–ì–µ–π, —è–∫ —Å—è –º–∞—î—à?',
        '–ü—Ä–∏–≤—ñ—Ç-–ø—Ä–∏–≤—ñ—Ç! –©–æ —Ç—Ä–µ–±–∞? üòâ',
        '–ì–µ–π! –ß–µ–∫–∞—é –Ω–∞ —Ç–≤–æ—ó –∫–æ–º–∞–Ω–¥–∏.',
        '–ô–æ! –©–æ —Å—å–æ–≥–æ–¥–Ω—ñ —Ä–æ–±–∏–º–æ?',
        '–û, –ø—Ä–∏–≤—ñ—Ç—É–ª—ñ!',
        '–°–ª—É—Ö–∞—é —É–≤–∞–∂–Ω–æ ü§ñ',
        '–ß–∏–º –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏, –¥—Ä—É–∂–µ?',
        '–í—ñ—Ç–∞—é! –Ø–∫ –º–æ–∂—É –±—É—Ç–∏ –∫–æ—Ä–∏—Å–Ω–∏–º?',
        '–î–æ–±—Ä–∏–π –¥–µ–Ω—å! –©–æ –≤–∞—Å —Ü—ñ–∫–∞–≤–∏—Ç—å?',
        '–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—à—É! –ß–∏–º –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏?',
        '–°–µ—Ä–≤—ñ—Å –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ. –©–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ?',
        '–ë—ñ–ø-–±—É–ø! –†–æ–±–æ–±–æ—Ç –¥–æ –≤–∞—à–∏—Ö –ø–æ—Å–ª—É–≥! ü§ñ',
        '–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–≤—ñ—á–ª–∏–≤–æ—Å—Ç—ñ... 100% ‚Äì –ü—Ä–∏–≤—ñ—Ç!',
        '–•—Ç–æ—Å—å –≤–∏–∫–ª–∏–∫–∞–≤ —à—Ç—É—á–Ω–∏–π —ñ–Ω—Ç–µ–ª–µ–∫—Ç? üëÄ',
        '–ü—Ä–∏–≤—ñ—Ç, –ª—é–¥—Å—å–∫–∞ —ñ—Å—Ç–æ—Ç–æ! –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ?',
        '–•–µ–π! –î–∞–≤–∞–π –ø—Ä–∞—Ü—é–≤–∞—Ç–∏! üöÄ',
        '–ó–¥–æ—Ä–æ–≤–µ–Ω—å–∫—ñ –±—É–ª–∏! –©–æ —Ç—Ä–µ–±–∞?',
        '–ü–æ—ó—Ö–∞–ª–∏! –Ø –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–±–æ—Ç–∏!',
        '–ì–æ—Ç–æ–≤–∏–π –¥–æ –≤–∏–∫–ª–∏–∫—É! –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ?',
        '–Ø —Ç—É—Ç! –ü–æ—á–Ω—ñ–º–æ.',
        '–ê–¥—Ä–µ—Å–Ω–∞ –∫–Ω–∏–≥–∞ –≤—ñ–¥–∫—Ä–∏—Ç–∞! –©–æ —Ä–æ–±–∏–º–æ?',
        '–ó–∞–ø–∏—Ç–∏ –ø—Ä–∏–π–º–∞—é—Ç—å—Å—è! –ß–∏–º –¥–æ–ø–æ–º–æ–≥—Ç–∏?',
        '–ö–æ–≥–æ—Å—å —à—É–∫–∞—î–º–æ? –Ø –≥–æ—Ç–æ–≤–∏–π!',
        '–ö–æ–Ω—Ç–∞–∫—Ç–∏? –ö–æ–º–∞–Ω–¥–∏? –©–æ —Ü—ñ–∫–∞–≤–∏—Ç—å?',
        '–ü–æ—á–∏–Ω–∞—î–º–æ —Ä–æ–±–æ—Ç—É. –í–≤–µ–¥—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É.',
    )
    print(v.view(options[rnd.randint(0, len(options) - 1)], '3'))
    v.lines +=1

def add_contact(args:list):
    if len(args) == 2:
        name, number = args[0], args[1]
        if name in contacts:
            warn(f"–¢–∞–∫–∏–π –∞–±–æ–Ω–µ–Ω—Ç –≤–∂–µ —ñ—Å–Ω—É—î. –î–ª—è –∑–∞–º—ñ–Ω–∏ –Ω–æ–º–µ—Ä—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É {v.higlight_cmd('change')}")
            return
        contacts[name] = number
        print(f'–ö–æ–Ω—Ç–∞–∫—Ç {v.person(name)} –∑ –Ω–æ–º–µ—Ä–æ–º {v.phone(number)} –¥–æ–¥–∞–Ω–æ.')
        v.lines +=1
    else:
        warn(f"–î–ª—è –≤–Ω–µ—Å–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—Ä–æ –æ—Å–æ–±—É –∫–æ–º–∞–Ω–¥–∞ {v.higlight_cmd('add')} –ø–æ–≤–∏–Ω–Ω–∞ –º–∞—Ç–∏ –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏: " +\
             f"{v.person('<—ñ–º\'—è>')} —Ç–∞ {v.phone('<–Ω–æ–º–µ—Ä>')}\n" +\
             f"–ù–∞–ø—Ä–∏–∫–ª–∞–¥: {v.view('add Volodymyr +380671234567', '3')}")

def change_contact(args:list):
    if len(args) == 2:
        name, number = args[0], args[1]
        if name in contacts:
            contacts[name] = number
            print(f"–ù–æ–º–µ—Ä –¥–ª—è {v.person(name)} –±—É–ª–æ –∑–º—ñ–Ω–µ–Ω–æ –Ω–∞ {v.phone(number)}.")
            v.lines +=1
        else:
            warn(f"–¢–∞–∫–æ–≥–æ –∞–±–æ–Ω–µ–Ω—Ç–∞ –Ω–µ —ñ—Å–Ω—É—î. –©–æ–± –¥–æ–¥–∞—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É {v.higlight_cmd('add')}")

def remove_contact(args:list):
    if len(args) == 1:
        name = args[0]
        if name in contacts:
            contacts.pop(name)
            print(f"–ö–æ–Ω—Ç–∞–∫—Ç –Ω–∞ —ñ–º'—è {v.person(name)} –±—É–ª–æ –≤–∏–¥–∞–ª–µ–Ω–æ.")
            v.lines +=1
        else:
            warn(f"–¢–∞–∫–æ–≥–æ –∞–±–æ–Ω–µ–Ω—Ç–∞ –Ω–µ —ñ—Å–Ω—É—î.")

def show_phone(args:list):
    if len(args) == 1:
        name = args[0]
        if name in contacts:
            number = contacts[name]
            print(f"–ó–Ω–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å –¥–ª—è {v.person(name)} –∑ –Ω–æ–º–µ—Ä–æ–º {v.phone(number)}.")
        else:
            warn(f"–ó–∞–ø–∏—Å—É –∑ —ñ–º'—è–º {v.person(name)} –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.")
        v.lines +=1

def show_all():
    if len(contacts) == 0:
        warn(f'–î–æ —Å–ø–∏—Å–∫—É –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ —â–µ –Ω–µ –¥–æ–¥–∞–Ω–æ –∂–æ–¥–Ω–æ–≥–æ –∑–∞–ø–∏—Å—É.')
        return
    keys = list(contacts.keys())
    keys.sort()
    print(f"–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ—Å—ñ–± –≤ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö: {v.view(str(len(keys)), '*3')}")
    for name in keys:
        number = contacts[name]
        print(f' > {v.person(name)} - {v.phone(number)}')
        v.lines +=1

def help():
    print(v.view(' –û—Å—å –ø–µ—Ä–µ–ª—ñ–∫ –∫–æ–º–∞–Ω–¥: ', '*0h'))

    # hi
    s = f"{v.higlight_cmd('hi')} / {v.higlight_cmd('hello')} / {v.higlight_cmd('–ø—Ä–∏–≤—ñ—Ç')}  "
    print(f"{s} - –≥–µ–Ω–µ—Ä—É—î –≤–∏–ø–∞–¥–∫–æ–≤–µ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è.")

    # exit
    s = f"{v.higlight_cmd('exit')} / {v.higlight_cmd('close')} / {v.higlight_cmd('quit')}  "
    print(f"{s} - –≤–∏—Ö—ñ–¥ –∑ –ø—Ä–æ–≥—Ä–∞–º–∏.")

    # add
    s = f"{v.higlight_cmd('add')} {v.person('<name>')} {v.phone('<phone>')}   "
    print(f"{s} - –¥–æ–¥–∞—Ç–∏ –¥–æ —Å–ø–∏—Å–∫—É –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ –æ—Å–æ–±—É —ñ —ó—ó –Ω–æ–º–µ—Ä. –ú–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–∏—à–µ –Ω–æ–≤–µ —ñ–º'—è.")

    # change
    s = f"{v.higlight_cmd('change')} {v.person('<name>')} {v.phone('<phone>')}"
    print(f"{s} - –∑–º—ñ–Ω–∏—Ç–∏ –Ω–æ–º–µ—Ä –æ—Å–æ–±–∏ –∑—ñ —Å–ø–∏—Å–∫—É –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤. –¢–∞–∫–∏–π –∑–∞–ø–∏—Å –º–∞—î —ñ—Å–Ω—É–≤–∞—Ç–∏ –≤ —Å–ø–∏—Å–∫—É –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤. –¢–æ–∂, —Å–ø–æ—á–∞—Ç–∫—É –¥–æ–¥–∞–π—Ç–µ –π–æ–≥–æ.")

    # remove
    s = f"{v.higlight_cmd('remove')} {v.person('<name>')}        "
    print(f"{s} - –≤–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–ø–∏—Å –∑—ñ —Å–ø–∏—Å–∫—É –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤. –ó–≤—ñ—Å–Ω–æ –∂ —Ç–∞–∫–∏–π –∑–∞–ø–∏—Å —Ç–µ–∂ –ø–æ–≤–∏–Ω–µ–Ω —ñ—Å–Ω—É–≤–∞—Ç–∏ –≤ —Å–ø–∏—Å–∫—É –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤.")

    # phone
    s = f"{v.higlight_cmd('phone')} {v.person('<name>')}         "
    print(f"{s} - –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏ –Ω–æ–º–µ—Ä –æ—Å–æ–±–∏ –∑—ñ —Å–ø–∏—Å–∫—É –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤. –¢–∞–∫–æ–∂ –∑–∞–ø–∏—Å –º–∞—î —ñ—Å–Ω—É–≤–∞—Ç–∏ –≤ —Å–ø–∏—Å–∫—É –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤.")

    # all
    s = f"{v.higlight_cmd('all')}                  "
    print(f"{s} - –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏ –≤—Å—ñ –∑–∞–ø–∏—Å–∏ –æ—Å—ñ–± –∑—ñ —Å–ø–∏—Å–∫—É –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ —Ä–∞–∑–æ–º –∑ –Ω–æ–º–µ—Ä–∞–º–∏.")

    # clrscr
    s = f"{v.higlight_cmd('clrscr')}               "
    print(f"{s} - –æ—á–∏—Å—Ç–∏—Ç–∏ –µ–∫—Ä–∞–Ω –≤—ñ–¥ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –∑–∞–ø–∏—Å—ñ–≤.")

    # ?
    s = f"{v.higlight_cmd('?')}                    "
    print(f"{s} - –≤–∏–∫–ª–∏–∫–∞—î —Ü—é —Å–ø—Ä–∞–≤–∫—É.")

def warn(s:str, end=None):
    v.prn(v.view(" !!! ", '0b') + ' ' + s, end=end)

def wrong_command(cmd:str):
    v.lines_clean()
    if cmd != '':
        warn(f"–ù–µ–≤—ñ–¥–æ–º–∞ –∫–æ–º–∞–Ω–¥–∞ '{v.higlight_cmd(cmd)}'. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑ —É–≤–∞–∂–Ω—ñ—à–µ. ", end='')
    print(f"–ù–µ –∑–Ω–∞—î—Ç–µ –∫–æ–º–∞–Ω–¥? –¢–æ–¥—ñ –≤–≤–µ–¥—ñ—Ç—å '{v.higlight_cmd('?')}' –¥–ª—è –≤–∏–∫–ª–∏–∫—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –¥–æ—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏.")
    v.lines += 1